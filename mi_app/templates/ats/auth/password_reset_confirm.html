{% extends "ats/auth/auth_base.html" %}
{% load static %}

{% block auth_hero_title %}Nueva contraseña{% endblock %}
{% block auth_lead_hero %}Elige una contraseña segura para tu cuenta.{% endblock %}
{% block auth_title %}Restablecer contraseña{% endblock %}
{% block auth_heading %}Restablecer contraseña{% endblock %}
{% block auth_lead %}Introduce tu nueva contraseña dos veces.{% endblock %}

{% block auth_content %}
  {% if validlink %}
  <form method="post" class="ats-auth-form">
    {% csrf_token %}
    {% for field in form %}
      <div class="form-group">
        <label for="{{ field.id_for_label }}">{{ field.label }}</label>
        <div class="form-control-wrap has-icon">
          <i class="input-icon bi bi-lock"></i>
          <input type="password" name="{{ field.name }}" id="{{ field.id_for_label }}" class="form-control" placeholder="{% if field.name == 'new_password1' %}Nueva contraseña{% else %}Repetir contraseña{% endif %}" required autocomplete="{% if field.name == 'new_password1' %}new-password{% else %}new-password{% endif %}">
        </div>
        {% if field.help_text %}<div class="form-text small">{{ field.help_text }}</div>{% endif %}
        {% if field.errors %}<ul class="errorlist">{{ field.errors }}</ul>{% endif %}
      </div>
    {% endfor %}
    <button type="submit" class="btn btn-submit">Guardar nueva contraseña</button>
  </form>
  {% else %}
  <div class="alert alert-warning border-0 rounded-2">
    El enlace ha expirado o no es válido. Solicita uno nuevo desde la página de recuperar contraseña.
  </div>
  <p class="mb-0 text-center">
    <a href="{% url 'ats_password_reset' %}" class="btn btn-outline-primary rounded-2">Solicitar nuevo enlace</a>
  </p>
  {% endif %}
  <p class="mt-4 mb-0 text-center">
    <a href="{% url 'ats_plataforma' %}" class="text-decoration-none"><i class="bi bi-arrow-left me-1"></i>Volver al inicio de sesión</a>
  </p>
{% endblock %}
